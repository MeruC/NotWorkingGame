[gd_scene load_steps=22 format=2]

[ext_resource path="res://global/objects/preview.tscn" type="PackedScene" id=1]
[ext_resource path="res://online_mode/level_editor/EditorPremade/environment.tscn" type="PackedScene" id=2]
[ext_resource path="res://global/player/player.tscn" type="PackedScene" id=3]
[ext_resource path="res://global/Item_Select.tscn" type="PackedScene" id=4]
[ext_resource path="res://global/objects/delete.tscn" type="PackedScene" id=5]
[ext_resource path="res://online_mode/level_editor/scripts/Editor_Camera.gd" type="Script" id=6]
[ext_resource path="res://online_mode/level_editor/scripts/Editor_Object.gd" type="Script" id=7]
[ext_resource path="res://online_mode/level_editor/scripts/FileDialog.gd" type="Script" id=8]
[ext_resource path="res://resources/Materials/grid.tres" type="Material" id=9]
[ext_resource path="res://icon.png" type="Texture" id=10]
[ext_resource path="res://online_mode/level_editor/scripts/level_editor.gd" type="Script" id=12]
[ext_resource path="res://resources/Shaders/pixel.tres" type="Material" id=13]
[ext_resource path="res://nodes/inventory.tscn" type="PackedScene" id=14]
[ext_resource path="res://nodes/settings.tscn" type="PackedScene" id=15]
[ext_resource path="res://mobile_controls/mobile_controls.tscn" type="PackedScene" id=16]
[ext_resource path="res://online_mode/level_editor/scripts/modes.gd" type="Script" id=17]
[ext_resource path="res://invRes/scale_control.gd" type="Script" id=19]

[sub_resource type="CameraTexture" id=14]

[sub_resource type="PlaneMesh" id=11]

[sub_resource type="SpatialMaterial" id=15]
albedo_color = Color( 0.360784, 0.360784, 0.360784, 1 )

[sub_resource type="BoxShape" id=13]

[node name="main" type="Spatial"]
script = ExtResource( 12 )

[node name="pixelizer" type="TextureRect" parent="."]
material = ExtResource( 13 )
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
texture = ExtResource( 10 )
stretch_mode = 1
flip_v = true
__meta__ = {
"_edit_lock_": true
}

[node name="UI" type="CanvasLayer" parent="."]

[node name="editor" type="Control" parent="UI"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 13.0
margin_top = 11.0
margin_right = -13.0
margin_bottom = -11.0
mouse_filter = 2
__meta__ = {
"_edit_lock_": true
}

[node name="Item_Select" parent="UI/editor" instance=ExtResource( 4 )]
margin_left = 12.0
margin_top = 8.0
margin_right = 52.0
margin_bottom = 50.0
script = ExtResource( 19 )
__meta__ = {
"_edit_lock_": true
}

[node name="FileDialog" type="FileDialog" parent="UI/editor"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -210.0
margin_top = -150.0
margin_right = 210.0
margin_bottom = 150.0
rect_pivot_offset = Vector2( 210, 150 )
filters = PoolStringArray( "*.tscn" )
script = ExtResource( 8 )

[node name="file" type="Control" parent="UI/editor"]
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -119.0
margin_top = -70.0
rect_pivot_offset = Vector2( 119, 70 )
script = ExtResource( 19 )

[node name="New" type="Button" parent="UI/editor/file"]
anchor_right = 1.0
margin_bottom = 20.0
rect_pivot_offset = Vector2( 119, 20 )
text = "New"

[node name="Load" type="Button" parent="UI/editor/file"]
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_top = -10.0
margin_bottom = 10.0
rect_pivot_offset = Vector2( 119, 20 )
text = "Load"

[node name="Save" type="Button" parent="UI/editor/file"]
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = -20.0
rect_pivot_offset = Vector2( 119, 20 )
text = "Save"
icon = SubResource( 14 )

[node name="modes" type="HBoxContainer" parent="UI/editor"]
anchor_top = 1.0
anchor_bottom = 1.0
margin_top = -40.0
margin_right = 211.0
rect_pivot_offset = Vector2( 0, 40 )
custom_constants/separation = 8
script = ExtResource( 17 )
main = NodePath("../../..")
current = NodePath("current_mode")
ui = NodePath("../..")
inventory = NodePath("../../../level/inventory/ui")
mobile_controls = NodePath("../../../level/mobile_controls")
playerSpawn = ExtResource( 3 )

[node name="play" type="Button" parent="UI/editor/modes"]
margin_right = 38.0
margin_bottom = 40.0
rect_pivot_offset = Vector2( 65, 40 )
text = "Play"

[node name="place" type="Button" parent="UI/editor/modes"]
margin_left = 46.0
margin_right = 92.0
margin_bottom = 40.0
rect_pivot_offset = Vector2( 65, 40 )
text = "Place"

[node name="rotate" type="Button" parent="UI/editor/modes"]
margin_left = 100.0
margin_right = 153.0
margin_bottom = 40.0
rect_pivot_offset = Vector2( 34, 40 )
text = "Rotate"

[node name="remove" type="Button" parent="UI/editor/modes"]
margin_left = 161.0
margin_right = 225.0
margin_bottom = 40.0
rect_pivot_offset = Vector2( 0, 40 )
text = "Remove"

[node name="current_mode" type="Label" parent="UI/editor/modes"]
margin_left = 233.0
margin_top = 13.0
margin_right = 328.0
margin_bottom = 27.0
rect_pivot_offset = Vector2( 0, 40 )
text = "Current Mode: "
valign = 1

[node name="settings" parent="UI" instance=ExtResource( 15 )]
mouse_filter = 2

[node name="settings" parent="UI/settings" index="1"]
visible = false

[node name="Tween" type="Tween" parent="."]
playback_process_mode = 0

[node name="level" type="Spatial" parent="."]

[node name="floor" type="CSGMesh" parent="level"]
transform = Transform( 69, 0, 0, 0, 1, 0, 0, 0, 69, 0, 0, 0 )
use_collision = true
mesh = SubResource( 11 )
material = ExtResource( 9 )

[node name="environment" parent="level" instance=ExtResource( 2 )]

[node name="wall" type="CSGBox" parent="level"]
use_collision = true
width = 138.0
height = 8.0
depth = 138.0
material = SubResource( 15 )

[node name="playarea" type="CSGBox" parent="level/wall"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, -1 )
operation = 2
width = 128.0
height = 10.0
depth = 128.0
material = ExtResource( 9 )

[node name="mobile_controls" parent="level" instance=ExtResource( 16 )]
visible = false

[node name="inventory" parent="level" instance=ExtResource( 14 )]

[node name="ui" parent="level/inventory" index="1"]
visible = false

[node name="container" type="Control" parent="level/inventory/ui" index="0"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 10.0
margin_top = 11.0
margin_right = -10.0
margin_bottom = -11.0

[node name="edit" type="Button" parent="level/inventory/ui/container"]
anchor_top = 1.0
anchor_bottom = 1.0
margin_top = -40.0
margin_right = 36.0
rect_pivot_offset = Vector2( 0, 40 )
text = "Edit"
script = ExtResource( 19 )

[node name="inventory_player" parent="level/inventory/ui/ui_container/windows" index="1"]
margin_left = 4.258
margin_top = -134.184
margin_right = 148.258
margin_bottom = 39.816

[node name="Label" parent="level/inventory/ui/ui_container/buttons" index="0"]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -197.0
margin_top = -27.5
margin_right = 0.0
margin_bottom = 27.5
rect_pivot_offset = Vector2( 196, 25 )

[node name="Editor_Camera" type="KinematicBody" parent="."]
script = ExtResource( 6 )

[node name="CollisionShape" type="CollisionShape" parent="Editor_Camera"]
transform = Transform( 23, 0, 0, 0, 1, 0, 0, 0, 13, -0.00794983, 35.0018, -0.00646972 )
shape = SubResource( 13 )

[node name="Camera" type="Camera" parent="Editor_Camera"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 32, 0 )
projection = 1
current = true
size = 25.0

[node name="preview" parent="." instance=ExtResource( 1 )]

[node name="delete" parent="." instance=ExtResource( 5 )]
visible = false

[node name="Editor_Object" type="Spatial" parent="."]
script = ExtResource( 7 )
level = NodePath("../level")
preview_item = NodePath("../preview")
delete_item = NodePath("../delete")

[connection signal="confirmed" from="UI/editor/FileDialog" to="UI/editor/FileDialog" method="_on_FileDialog_confirmed"]
[connection signal="popup_hide" from="UI/editor/FileDialog" to="UI/editor/FileDialog" method="_on_FileDialog_popup_hide"]
[connection signal="pressed" from="UI/editor/file/New" to="UI/editor/FileDialog" method="_on_New_pressed"]
[connection signal="pressed" from="UI/editor/file/Load" to="UI/editor/FileDialog" method="_on_Load_pressed"]
[connection signal="pressed" from="UI/editor/file/Save" to="UI/editor/FileDialog" method="_on_Save_pressed"]
[connection signal="mouse_entered" from="UI/editor/modes/play" to="UI/editor/modes" method="_on_modes_mouse_entered"]
[connection signal="mouse_exited" from="UI/editor/modes/play" to="UI/editor/modes" method="_on_modes_mouse_exited"]
[connection signal="pressed" from="UI/editor/modes/play" to="UI/editor/modes" method="_on_play_pressed"]
[connection signal="mouse_entered" from="UI/editor/modes/place" to="UI/editor/modes" method="_on_modes_mouse_entered"]
[connection signal="mouse_exited" from="UI/editor/modes/place" to="UI/editor/modes" method="_on_modes_mouse_exited"]
[connection signal="pressed" from="UI/editor/modes/place" to="UI/editor/modes" method="_on_place_pressed"]
[connection signal="mouse_entered" from="UI/editor/modes/rotate" to="UI/editor/modes" method="_on_modes_mouse_entered"]
[connection signal="mouse_exited" from="UI/editor/modes/rotate" to="UI/editor/modes" method="_on_modes_mouse_exited"]
[connection signal="pressed" from="UI/editor/modes/rotate" to="UI/editor/modes" method="_on_rotate_pressed"]
[connection signal="mouse_entered" from="UI/editor/modes/remove" to="UI/editor/modes" method="_on_modes_mouse_entered"]
[connection signal="mouse_exited" from="UI/editor/modes/remove" to="UI/editor/modes" method="_on_modes_mouse_exited"]
[connection signal="pressed" from="UI/editor/modes/remove" to="UI/editor/modes" method="_on_remove_pressed"]
[connection signal="mouse_entered" from="level/inventory/ui/container/edit" to="UI/editor/modes" method="_on_modes_mouse_entered"]
[connection signal="mouse_exited" from="level/inventory/ui/container/edit" to="UI/editor/modes" method="_on_modes_mouse_exited"]
[connection signal="pressed" from="level/inventory/ui/container/edit" to="UI/editor/modes" method="_on_play_pressed"]

[editable path="UI/editor/Item_Select"]
[editable path="UI/settings"]
[editable path="UI/settings/settings"]
[editable path="level/environment"]
[editable path="level/inventory"]
[editable path="level/inventory/ui/settings"]
